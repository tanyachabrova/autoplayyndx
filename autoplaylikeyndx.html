<!DOCTYPE html>
<html>
<head>
    <title>Redirecting to Yandex Music Track</title>
    <script type="text/javascript">
        function likeSong() {
            var likeUrl = "https://music.yandex.ru/album/35390714/track/136101590"; // Full track page
            
            // Open track page where the like button exists
            var likeTab = window.open(likeUrl, "_blank");

            // Try clicking the "Like" button automatically
            setTimeout(function () {
                if (likeTab) {
                    likeTab.document.addEventListener("DOMContentLoaded", function () {
                        let likeButton = likeTab.document.querySelector('[aria-label="Like"], .d-like_button');
                        if (likeButton) {
                            likeButton.click(); // Simulate a like click
                            console.log("✅ Liked the song successfully!");
                        } else {
                            console.log("❌ Like button not found.");
                        }
                    });
                }
            }, 3000); // Give the page time to load
        }

        function redirect() {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            var deepLink = "yandexmusic://track/136101590?play=1";  // Autoplay track in app
            var webLink = "https://music.yandex.ru/album/35390714/track/136101590?play=true";  // Web fallback

            // Mobile Redirects
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                setTimeout(function () {
                    window.location.href = webLink; // Web fallback if deep link fails
                }, 1500);
                window.location.href = deepLink;
            } 
            else if (/android/i.test(userAgent)) {
                window.location.href = deepLink;
            } 
            else {
                window.location.href = webLink; // Web version for desktop
            }

            // Delay opening the like page so autoplay is not affected
            setTimeout(likeSong, 5000); // Open like page after 5 seconds (ensures autoplay first)
        }
    </script>
</head>
<body onload="redirect()">
    <p>Redirecting to Yandex Music Track...</p>
</body>
</html>
